export const eventNames: string[] = [
    "Atlanta Hawks v Charlotte Hornets",
    "Atlanta Hawks v Golden State Warriors",
    "Atlanta Hawks v LA Clippers",
    "Atlanta Hawks v Philadelphia 76ers",
    "BOS Celtics v Brooklyn Nets",
    "BOS Celtics v Oklahoma City Thunder",
    "Brooklyn Nets v Atlanta Hawks",
    "Brooklyn Nets v BOS Celtics",
    "Brooklyn Nets v Dallas Mavericks",
    "Brooklyn Nets v LA Clippers",
    "Brooklyn Nets v Toronto Raptors",
    "CHI Bulls v Brooklyn Nets",
    "CHI Bulls v Dallas Mavericks",
    "CHI Bulls v LAL Lakers",
    "Charlotte Hornets v Atlanta Hawks",
    "Charlotte Hornets v New York Knicks",
    "Charlotte Hornets v Orlando Magic",
    "Charlotte Hornets v Utah Jazz",
    "Cleveland Cavaliers v LA Clippers",
    "Cleveland Cavaliers v Orlando Magic",
    "Cleveland Cavaliers v San Antonio Spurs",
    "Dallas Mavericks v Brooklyn Nets",
    "Dallas Mavericks v Detroit Pistons",
    "Dallas Mavericks v Philadelphia 76ers",
    "Denver Nuggets v CHI Bulls",
    "Denver Nuggets v LAL Lakers",
    "Denver Nuggets v MIL Bucks",
    "Denver Nuggets v Minnesota Timberwolves",
    "Denver Nuggets v Utah Jazz",
    "Denver Nuggets v Washington Wizards",
    "Detroit Pistons v Cleveland Cavaliers",
    "Detroit Pistons v New Orleans Pelicans",
    "Detroit Pistons v Oklahoma City Thunder",
    "Detroit Pistons v San Antonio Spurs",
    "Detroit Pistons v Washington Wizards",
    "Golden State Warriors v Denver Nuggets",
    "Golden State Warriors v MIL Bucks",
    "Golden State Warriors v New York Knicks",
    "Golden State Warriors v Sacramento Kings",
    "Golden State Warriors v Toronto Raptors",
    "Houston Rockets v Atlanta Hawks",
    "Houston Rockets v CHI Bulls",
    "Houston Rockets v Dallas Mavericks",
    "Houston Rockets v Denver Nuggets",
    "Houston Rockets v Philadelphia 76ers",
    "Houston Rockets v Phoenix Suns",
    "Indiana Pacers v Brooklyn Nets",
    "Indiana Pacers v Dallas Mavericks",
    "Indiana Pacers v LAL Lakers",
    "Indiana Pacers v Minnesota Timberwolves",
    "Indiana Pacers v Sacramento Kings",
    "LA Clippers v Charlotte Hornets",
    "LA Clippers v Cleveland Cavaliers",
    "LA Clippers v Memphis Grizzlies",
    "LA Clippers v Oklahoma City Thunder",
    "LAL Lakers v CHI Bulls",
    "LAL Lakers v Denver Nuggets",
    "LAL Lakers v Houston Rockets",
    "LAL Lakers v MIL Bucks",
    "LAL Lakers v Phoenix Suns",
    "LAL Lakers v San Antonio Spurs",
    "MIL Bucks v Atlanta Hawks",
    "MIL Bucks v Indiana Pacers",
    "MIL Bucks v LAL Lakers",
    "MIL Bucks v New York Knicks",
    "MIL Bucks v Oklahoma City Thunder",
    "Memphis Grizzlies v BOS Celtics",
    "Memphis Grizzlies v Cleveland Cavaliers",
    "Memphis Grizzlies v LAL Lakers",
    "Memphis Grizzlies v Miami Heat",
    "Memphis Grizzlies v Utah Jazz",
    "Miami Heat v Atlanta Hawks",
    "Miami Heat v BOS Celtics",
    "Miami Heat v Charlotte Hornets",
    "Miami Heat v Detroit Pistons",
    "Miami Heat v Golden State Warriors",
    "Miami Heat v Houston Rockets",
    "Miami Heat v LA Clippers",
    "Minnesota Timberwolves v Detroit Pistons",
    "Minnesota Timberwolves v Indiana Pacers",
    "Minnesota Timberwolves v New Orleans Pelicans",
    "Minnesota Timberwolves v Orlando Magic",
    "Minnesota Timberwolves v Phoenix Suns",
    "Minnesota Timberwolves v Utah Jazz",
    "New Orleans Pelicans v Charlotte Hornets",
    "New Orleans Pelicans v Detroit Pistons",
    "New Orleans Pelicans v Golden State Warriors",
    "New Orleans Pelicans v Orlando Magic",
    "New Orleans Pelicans v Philadelphia 76ers",
    "New York Knicks v Dallas Mavericks",
    "New York Knicks v LA Clippers",
    "New York Knicks v Miami Heat",
    "New York Knicks v Portland Trail Blazers",
    "New York Knicks v Washington Wizards",
    "Oklahoma City Thunder v CHI Bulls",
    "Oklahoma City Thunder v Charlotte Hornets",
    "Oklahoma City Thunder v Indiana Pacers",
    "Oklahoma City Thunder v Memphis Grizzlies",
    "Oklahoma City Thunder v Philadelphia 76ers",
    "Orlando Magic v Dallas Mavericks",
    "Orlando Magic v Houston Rockets",
    "Orlando Magic v LA Clippers",
    "Orlando Magic v LAL Lakers",
    "Orlando Magic v Sacramento Kings",
    "Philadelphia 76ers v Indiana Pacers",
    "Philadelphia 76ers v Miami Heat",
    "Philadelphia 76ers v Toronto Raptors",
    "Philadelphia 76ers v Washington Wizards",
    "Phoenix Suns v BOS Celtics",
    "Phoenix Suns v CHI Bulls",
    "Phoenix Suns v Cleveland Cavaliers",
    "Phoenix Suns v Houston Rockets",
    "Phoenix Suns v MIL Bucks",
    "Phoenix Suns v Sacramento Kings",
    "Phoenix Suns v Toronto Raptors",
    "Portland Trail Blazers v BOS Celtics",
    "Portland Trail Blazers v Cleveland Cavaliers",
    "Portland Trail Blazers v Denver Nuggets",
    "Portland Trail Blazers v Memphis Grizzlies",
    "Portland Trail Blazers v New York Knicks",
    "Portland Trail Blazers v Toronto Raptors",
    "Portland Trail Blazers v Washington Wizards",
    "Sacramento Kings v BOS Celtics",
    "Sacramento Kings v CHI Bulls",
    "Sacramento Kings v Cleveland Cavaliers",
    "Sacramento Kings v MIL Bucks",
    "Sacramento Kings v Memphis Grizzlies",
    "Sacramento Kings v Oklahoma City Thunder",
    "Sacramento Kings v Portland Trail Blazers",
    "San Antonio Spurs v BOS Celtics",
    "San Antonio Spurs v Charlotte Hornets",
    "San Antonio Spurs v Dallas Mavericks",
    "San Antonio Spurs v Golden State Warriors",
    "San Antonio Spurs v New Orleans Pelicans",
    "San Antonio Spurs v New York Knicks",
    "San Antonio Spurs v Philadelphia 76ers",
    "Toronto Raptors v Charlotte Hornets",
    "Toronto Raptors v Philadelphia 76ers",
    "Toronto Raptors v San Antonio Spurs",
    "Utah Jazz v BOS Celtics",
    "Utah Jazz v CHI Bulls",
    "Utah Jazz v Cleveland Cavaliers",
    "Utah Jazz v Houston Rockets",
    "Utah Jazz v Memphis Grizzlies",
    "Utah Jazz v Toronto Raptors",
    "Utah Jazz v Washington Wizards",
    "Washington Wizards v Brooklyn Nets",
    "Washington Wizards v Indiana Pacers",
    "Washington Wizards v Miami Heat",
    "Washington Wizards v Orlando Magic",
    "Washington Wizards v Toronto Raptors",
];

export const teamNames: string[] = [
    "Atlanta Hawks",
    "BOS Celtics",
    "Brooklyn Nets",
    "Charlotte Hornets",
    "CHI Bulls",
    "Cleveland Cavaliers",
    "Dallas Mavericks",
    "Denver Nuggets",
    "Detroit Pistons",
    "Golden State Warriors",
    "Houston Rockets",
    "Indiana Pacers",
    "LA Clippers",
    "LAL Lakers",
    "Memphis Grizzlies",
    "Miami Heat",
    "MIL Bucks",
    "Minnesota Timberwolves",
    "New Orleans Pelicans",
    "New York Knicks",
    "Oklahoma City Thunder",
    "Orlando Magic",
    "Philadelphia 76ers",
    "Phoenix Suns",
    "Portland Trail Blazers",
    "Sacramento Kings",
    "San Antonio Spurs",
    "Toronto Raptors",
    "Utah Jazz",
    "Washington Wizards",
];

/**
 * Finds all team names in the teamNames array that match the input string and returns their indexes
 * @param input The string to search for team names
 * @returns An object containing arrays of indexes of the matching team names, repeated team names,
 * and event indexes where the first two matched teams appear together
 */
export const extractTeamData = (input: string) => {
    // Convert input to lowercase for case-insensitive matching
    const lowerInput = input.toLowerCase();

    // Array to store all matching indexes
    const matches: number[] = [];
    // Object to track mention counts for each team
    const mentionCounts: Record<number, number> = {};

    // Loop through all team names
    for (let i = 0; i < teamNames.length; i++) {
        // Convert team name to lowercase for case-insensitive comparison
        const teamName = teamNames[i].toLowerCase();

        // Check if the entire team name is in the input
        if (lowerInput.includes(teamName)) {
            matches.push(i);

            // Count occurrences of the full team name
            let count = 0;
            let pos = lowerInput.indexOf(teamName);
            while (pos !== -1) {
                count++;
                pos = lowerInput.indexOf(teamName, pos + 1);
            }
            mentionCounts[i] = (mentionCounts[i] || 0) + count;

            continue; // Skip word-by-word check if full name matches
        }

        // Split the team name into words for partial matching
        const words = teamName.split(" ");
        let wordMatched = false;
        let wordMentions = 0;

        // Check if any word from the team name is in the input
        for (const word of words) {
            // Skip very short words (less than 3 characters) to reduce false positives
            if (word.length < 3) continue;

            // Check if the word appears as a standalone word in the input
            // Using word boundary regex to avoid matching parts of other words
            const wordRegex = new RegExp(`\\b${word}\\b`, "gi");
            const wordMatches = lowerInput.match(wordRegex);

            if (wordMatches) {
                if (!wordMatched) {
                    wordMatched = true;
                    matches.push(i);
                }
                wordMentions += wordMatches.length;
            }
        }

        // If we matched by word, record the mention count
        if (wordMatched) {
            mentionCounts[i] = (mentionCounts[i] || 0) + wordMentions;
        }
    }

    // Identify team indexes that are mentioned multiple times
    const repeatedMatches = matches.filter(
        (index) => (mentionCounts[index] || 0) > 1
    );

    // Find event indexes where the first two teams in matches appear together
    const eventIndexes: number[] = [];

    // Only proceed if we have at least 2 team matches
    if (matches.length >= 2) {
        const team1 = teamNames[matches[0]];
        const team2 = teamNames[matches[1]];

        // Search through eventNames for matches containing both teams
        eventNames.forEach((eventName, index) => {
            if (eventName.includes(team1) && eventName.includes(team2)) {
                eventIndexes.push(index);
            }
        });
    }

    // Return object with matches array, repeated matches, and event indexes as properties
    return {
        teamName: teamNames[repeatedMatches[0]],
        eventName: eventNames[eventIndexes[0]],
    };
};
